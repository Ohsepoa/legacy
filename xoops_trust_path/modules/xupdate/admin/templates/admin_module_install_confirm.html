<div id="contentBody">

<div class="adminnavi">
  <a href="./index.php"><{$smarty.const._MI_XUPDATE_ADMENU_ADDONSTORE}></a>
  &raquo;&raquo; <span class="adminnaviTitle"><a href="./index.php?action=ModuleStore"><{$smarty.const._MI_XUPDATE_ADMENU_ADDONSTOREDEC}></a></span>
</div>

<h3 class="admintitle"><{$smarty.const._MI_XUPDATE_ADMENU_ADDONSTORE}></h3>

<div class="tips">
<ul>
	<li><{$smarty.const._MI_XUPDATE_TEMP_PATH}> <{$xupdate_writable.path}>
	<{if $xupdate_writable.result==true}>
		(<span style="color:green;font-weight:bold;"><{$smarty.const._AD_XUPDATE_LANG_WRITABLE_RESULT}> OK</span>)
	<{else}>
		(<span style="color:red;font-weight:bold;"><{$smarty.const._AD_XUPDATE_LANG_WRITABLE_RESULT}> NG</span>)
	<{/if}>
	</li>
	<li><{$mod_config.FTP_UserName}>
<{* TODO FTP CHECK *}>
	<{if $mod_config.FTP_UserName }>
		(<span style="color:green;font-weight:bold;"><{$smarty.const._AD_XUPDATE_LANG_FTP_PASS_RESULT}> OK</span>)
	<{else}>
		(<span style="color:red;font-weight:bold;"><{$smarty.const._AD_XUPDATE_LANG_FTP_PASS_RESULT}> NG</span>)
	<{/if}>
	</li>
</ul>
</div>


<{if $actionForm->hasError() && $actionForm->getErrorMessages()}>
<div class="error">
  <ul>
    <{foreach item=message from=$actionForm->getErrorMessages()}>
      <li><{$message|xoops_escape}></li>
    <{/foreach}>
  </ul>
</div>
<{/if}>
<form action="index.php?action=ModuleInstall" method="post">
  <{xoops_token form=$actionForm}>
  <{xoops_input type=hidden name=confirm value=1}>

<table class="outer">
  <tr>
    <th>name</th>
    <th>value</th>
  </tr>
  <tr class="<{cycle values='odd,even'}>">
    <td class="legacy_list_select">id</td>
    <td class="legacy_list_select">
        <{xoops_input type=hidden name=id value=$id }>
        <{$id|xoops_escape:show}>
    </td>
  </tr>
  <tr class="<{cycle values='odd,even'}>">
    <td class="legacy_list_select"><{$smarty.const._MD_XUPDATE_LANG_SID}></td>
    <td class="legacy_list_select">
        <{xoops_input type=hidden name=sid value=$sid }>
        <{$sid|xoops_escape:show}>
    </td>
  </tr>
  <tr class="<{cycle values='odd,even'}>">
    <td class="legacy_list_select">target_key</td>
    <td class="legacy_list_select">
        <{xoops_input type=hidden name=target_key value=$target_key }>
        <{$target_key|xoops_escape:show}>
    </td>
  </tr>
  <tr class="<{cycle values='odd,even'}>">
    <td class="legacy_list_select">target_type</td>
    <td class="legacy_list_select">
        <{xoops_input type=hidden name=target_type value=$target_type }>
        <{$target_type|xoops_escape:show}>
    </td>
  </tr>
  <tr class="<{cycle values='odd,even'}>">
    <td class="legacy_list_select">trust_dirname</td>
    <td class="legacy_list_select">
        <{xoops_input type=hidden name=trust_dirname value=$trust_dirname }>
        <{$trust_dirname|xoops_escape:show}>
    </td>
  </tr>
  <tr class="<{cycle values='odd,even'}>">
    <td class="legacy_list_select">dirname</td>
    <td class="legacy_list_select">
    <{if $target_type == 'TrustModule'}>
        <{xoops_input type=text name=dirname value=$dirname }>
    <{else}>
        <{xoops_input type=hidden name=trust_dirname value=$dirname }>
        <{$dirname|xoops_escape:show}>
    <{/if}>
    </td>
  </tr>

  <tr>
    <td class="foot" colspan="2">
       <{if !$actionForm->getErrorMessages()}>
      <input type="submit" value="<{$smarty.const._MI_XUPDATE_LANG_UPDATE}>" class="formButton" />
      <{/if}>
      <input class="formButton" type="submit" value="<{$smarty.const._BACK}>" name="_form_control_cancel" />
    </td>
  </tr>
</table>
</form>

</div>
